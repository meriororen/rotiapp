.ng-cloak(ng-init="init()")
  .col-md-6
    div
      h4 
        ' Rangkuman Penjualan 
        small
          a(href="#" ng-click="open()")
            i.fa.fa-plus-square
    /! -------  add sale modal template
    script(type="text/ng-template" id="AddRotiSaleTemplate.html")
      div.modal-header
        button.close(type="button" ng-click="cancel()")
          span &times;
        h4.modal-title Tambahkan Penjualan
      div.modal-body
        form
          div.form-group
            label.control-label(for="tanggal") Tanggal:
            p.input-group
              input.form-control(type="text" datepicker-popup="dd.MM.yyyy" is-open="opened" datepicker-options="dateOptions" ng-required="true" close-text="Close" ng-model="newSale.tanggal")
              span.input-group-btn
                button.btn.btn-default(type="button" ng-click="openDatePicker($event)")
                  i.glyphicon.glyphicon-calendar
          tabset
            tab(ng-repeat="lokasi in newSale.lokasis" heading="{{ lokasi.lokasi.nama }}")
              /! -- { #tgl: [{#lok}, {#lok}] }, #lok: { "lokasi": {obj.lok}, "rotis": {obj.rotis} }
              div.tab-content(style="margin: 10px 0px 10px 0px;")
                div.tab-pane.active
                  div.row
                    div.col-sm-6
                      p.input-group.input-group-sm(ng-repeat="roti in newSale.lokasis[$index].rotis")
                        span.input-group-addon(style="font-weight: bold;")
                          ' {{ roti.jumlah }} 
                        input.form-control(type="text" ng-model="roti.nama")
                        span.input-group-btn
                          button.btn.btn-success(type="button" ng-click="increment(roti)")
                            i.glyphicon.glyphicon-plus
                          button.btn.btn-danger(type="button" ng-click="decrement(roti)")
                            i.glyphicon.glyphicon-minus
        div.modal-footer
          button.btn.btn-default(type="button" ng-click="cancel()") Tutup
          button.btn.btn-primary(type="submit" ng-click="submit(newRotiSale)") Tambahkan
    /! ---- add sale modal template finish
    hr
      accordion(close-others="true")
        accordion-group(ng-repeat="(tgl, data) in rotisales" is-open="accst.open")
          accordion-heading 
            ' Penjualan {{ tgl * 1000 | date:'dd-MMM-yyyy' }}
            i.pull-right.glyphicon(ng-class="{'glyphicon-chevron-down': accst.open, 'glyphicon-chevron-right': !accst.open}")
          div
            li(ng-repeat="rotisale in data")
              ' {{ rotisale.lokasi.nama }} (Nitip: {{ rotisale.lokasi.penanggung_jawab }})
              ul
                li(ng-repeat="roti in rotisale.rotis")
                  ' {{ roti.nama }} {{ roti.jumlah }} buah &times; &yen;{{ roti.harga }}
